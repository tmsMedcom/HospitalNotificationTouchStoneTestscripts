{"resourceType":"TestScript","id":"UFHV10","meta":{"profile":["http://touchstone.aegis.net/touchstone/fhir/testing/StructureDefinition/testscript"]},"text":{"status":"generated","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\"><p><b>Generated Narrative</b></p><p><b>url</b>: <code>http://build.fhir.org/ig/hl7dk/dk-medcom/</code></p><p><b>version</b>: 0.1.0</p><p><b>name</b>: Patient is admitted at hospital, transferred to another hospital (another region), and finally discharged to home</p><p><b>title</b>: Patient is admitted at hospital, transferred to another hospital (another region), and finally discharged to home</p><p><b>status</b>: active</p><p><b>date</b>: 2021-07-05</p><p><b>publisher</b>: MedCom</p><p><b>contact</b>: MedCom: <a href=\"mailto:fhir@medcom.dk\">fhir@medcom.dk</a></p><p><b>description</b>: Testing correct use of admit and discharge</p><p><b>copyright</b>: MedCom 2021</p><h3>Origins</h3><table class=\"grid\"><tr><td>-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td>*</td><td>1</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types FHIR-Client}\">FHIR Client</span></td></tr></table><h3>Destinations</h3><table class=\"grid\"><tr><td>-</td><td><b>Index</b></td><td><b>Profile</b></td></tr><tr><td>*</td><td>1</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types FHIR-Server}\">FHIR Server</span></td></tr></table><blockquote><p><b>fixture</b></p><p><b>autocreate</b>: false</p><p><b>autodelete</b>: false</p><p><b>resource</b>: <a href=\"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN-UF_H_V_10.xml\">/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN-UF_H_V_10.xml</a></p></blockquote><blockquote><p><b>fixture</b></p><p><b>autocreate</b>: false</p><p><b>autodelete</b>: false</p><p><b>resource</b>: <a href=\"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN2-UF_H_V_10.xml\">/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN2-UF_H_V_10.xml</a></p></blockquote><blockquote><p><b>fixture</b></p><p><b>autocreate</b>: false</p><p><b>autodelete</b>: false</p><p><b>resource</b>: <a href=\"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/SLHJ-UF_H_V_10.xml\">/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/SLHJ-UF_H_V_10.xml</a></p></blockquote><p><b>profile</b>: <a href=\"http://medcomfhir.dk/fhir/core/1.0/StructureDefinition/medcom-hospitalNotification-message\">http://medcomfhir.dk/fhir/core/1.0/StructureDefinition/medcom-hospitalNotification-message</a></p><blockquote><p><b>variable</b></p><p><b>name</b>: destinationUri</p><p><b>expression</b>: Bundle.entry.resource.ofType(MessageHeader).destination.endpoint</p><p><b>sourceId</b>: bundle-create-STIN1</p></blockquote><blockquote><p><b>variable</b></p><p><b>name</b>: destinationUriSTIN2</p><p><b>expression</b>: Bundle.entry.resource.ofType(MessageHeader).destination.endpoint</p><p><b>sourceId</b>: bundle-create-STIN2</p></blockquote><blockquote><p><b>variable</b></p><p><b>name</b>: destinationUriSLHJ8</p><p><b>expression</b>: Bundle.entry.resource.ofType(MessageHeader).destination.endpoint</p><p><b>sourceId</b>: bundle-create-SLHJ</p></blockquote><blockquote><p><b>setup</b></p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>EncodeRequestUrl</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes delete}\">Delete</span></td><td>Bundle</td><td>System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint</td><td>xml</td><td>true</td><td>?message.destination-uri=${destinationUri}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>ContentType</b></td><td><b>EncodeRequestUrl</b></td><td><b>SourceId</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes create}\">Create</span></td><td>Bundle</td><td>Create the Bundle resource in XML format on the destination server.</td><td>xml</td><td>xml</td><td>true</td><td>bundle-create-STIN1</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 201(Created).</td><td>response</td><td>201</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>EncodeRequestUrl</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes delete}\">Delete</span></td><td>Bundle</td><td>System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint</td><td>xml</td><td>true</td><td>?message.destination-uri=${destinationUriSTIN2}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>ContentType</b></td><td><b>EncodeRequestUrl</b></td><td><b>SourceId</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes create}\">Create</span></td><td>Bundle</td><td>Create the Bundle resource in XML format on the destination server.</td><td>xml</td><td>xml</td><td>true</td><td>bundle-create-STIN2</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 201(Created).</td><td>response</td><td>201</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 201(Created).</td><td>response</td><td>201</td><td>false</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>EncodeRequestUrl</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes delete}\">Delete</span></td><td>Bundle</td><td>System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint</td><td>xml</td><td>true</td><td>?message.destination-uri=${destinationUriSLHJ8}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>ContentType</b></td><td><b>EncodeRequestUrl</b></td><td><b>SourceId</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes create}\">Create</span></td><td>Bundle</td><td>Create the Bundle resource in XML format on the destination server.</td><td>xml</td><td>xml</td><td>true</td><td>bundle-create-SLHJ</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 201(Created).</td><td>response</td><td>201</td><td>false</td></tr></table></blockquote></blockquote><blockquote><p><b>test</b></p><p><b>name</b>: HospitalNotification-STIN</p><p><b>description</b>: GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>Destination</b></td><td><b>EncodeRequestUrl</b></td><td><b>Origin</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes read}\">Read</span></td><td>Bundle</td><td>Receive notification about admission -STIN</td><td>xml</td><td>1</td><td>true</td><td>1</td><td>?message.destination-uri=${destinationUri}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 200(OK).</td><td>response</td><td>200</td><td>false</td></tr></table></blockquote></blockquote><blockquote><p><b>test</b></p><p><b>name</b>: HospitalNotification-STIN2</p><p><b>description</b>: GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>Destination</b></td><td><b>EncodeRequestUrl</b></td><td><b>Origin</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes read}\">Read</span></td><td>Bundle</td><td>The patient does not show up after ended leave -SLHJ</td><td>xml</td><td>1</td><td>true</td><td>1</td><td>?message.destination-uri=${destinationUriSTIN2}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 200(OK).</td><td>response</td><td>200</td><td>false</td></tr></table></blockquote></blockquote><blockquote><p><b>test</b></p><p><b>name</b>: HospitalNotification-SLHJ</p><p><b>description</b>: GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.</p><blockquote><p><b>action</b></p><h3>Operations</h3><table class=\"grid\"><tr><td>-</td><td><b>Type</b></td><td><b>Resource</b></td><td><b>Description</b></td><td><b>Accept</b></td><td><b>Destination</b></td><td><b>EncodeRequestUrl</b></td><td><b>Origin</b></td><td><b>Params</b></td></tr><tr><td>*</td><td><span title=\"{http://terminology.hl7.org/CodeSystem/testscript-operation-codes read}\">Read</span></td><td>Bundle</td><td>The patient does not show up after ended leave -SLHJ</td><td>xml</td><td>1</td><td>true</td><td>1</td><td>?message.destination-uri=${destinationUriSLHJ8}</td></tr></table></blockquote><blockquote><p><b>action</b></p><h3>Asserts</h3><table class=\"grid\"><tr><td>-</td><td><b>Description</b></td><td><b>Direction</b></td><td><b>ResponseCode</b></td><td><b>WarningOnly</b></td></tr><tr><td>*</td><td>Confirm that the returned HTTP status is 200(OK).</td><td>response</td><td>200</td><td>false</td></tr></table></blockquote></blockquote></div>"},"url":"http://build.fhir.org/ig/hl7dk/dk-medcom/","version":"0.1.0","name":"Patient is admitted at hospital, transferred to another hospital (another region), and finally discharged to home","title":"Patient is admitted at hospital, transferred to another hospital (another region), and finally discharged to home","status":"active","date":"2021-07-05","publisher":"MedCom","contact":[{"name":"MedCom","telecom":[{"system":"email","value":"fhir@medcom.dk"}]}],"description":"Testing correct use of admit and discharge","copyright":"MedCom 2021","origin":[{"index":1,"profile":{"system":"http://terminology.hl7.org/CodeSystem/testscript-profile-origin-types","code":"FHIR-Client"}}],"destination":[{"index":1,"profile":{"system":"http://terminology.hl7.org/CodeSystem/testscript-profile-destination-types","code":"FHIR-Server"}}],"fixture":[{"id":"bundle-create-STIN1","autocreate":false,"autodelete":false,"resource":{"reference":"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN-UF_H_V_10.xml"}},{"id":"bundle-create-STIN2","autocreate":false,"autodelete":false,"resource":{"reference":"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/STIN2-UF_H_V_10.xml"}},{"id":"bundle-create-SLHJ","autocreate":false,"autodelete":false,"resource":{"reference":"/FHIRSandbox/MedCom/401-Hospitalnotification/receive/Userstory/_reference/resources/SLHJ-UF_H_V_10.xml"}}],"profile":[{"id":"hospitalnotification-profile","reference":"http://medcomfhir.dk/fhir/core/1.0/StructureDefinition/medcom-hospitalNotification-message"}],"variable":[{"name":"destinationUri","expression":"Bundle.entry.resource.ofType(MessageHeader).destination.endpoint","sourceId":"bundle-create-STIN1"},{"name":"destinationUriSTIN2","expression":"Bundle.entry.resource.ofType(MessageHeader).destination.endpoint","sourceId":"bundle-create-STIN2"},{"name":"destinationUriSLHJ8","expression":"Bundle.entry.resource.ofType(MessageHeader).destination.endpoint","sourceId":"bundle-create-SLHJ"}],"setup":{"action":[{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"delete"},"resource":"Bundle","description":"System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint","accept":"xml","encodeRequestUrl":true,"params":"?message.destination-uri=${destinationUri}"}},{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"create"},"resource":"Bundle","description":"Create the Bundle resource in XML format on the destination server.","accept":"xml","contentType":"xml","encodeRequestUrl":true,"sourceId":"bundle-create-STIN1"}},{"assert":{"description":"Confirm that the returned HTTP status is 201(Created).","direction":"response","responseCode":"201","warningOnly":false}},{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"delete"},"resource":"Bundle","description":"System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint","accept":"xml","encodeRequestUrl":true,"params":"?message.destination-uri=${destinationUriSTIN2}"}},{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"create"},"resource":"Bundle","description":"Create the Bundle resource in XML format on the destination server.","accept":"xml","contentType":"xml","encodeRequestUrl":true,"sourceId":"bundle-create-STIN2"}},{"assert":{"description":"Confirm that the returned HTTP status is 201(Created).","direction":"response","responseCode":"201","warningOnly":false}},{"assert":{"description":"Confirm that the returned HTTP status is 201(Created).","direction":"response","responseCode":"201","warningOnly":false}},{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"delete"},"resource":"Bundle","description":"System-generated search and delete operations from conditional delete on Bundle MessageHeader).destination.endpoint","accept":"xml","encodeRequestUrl":true,"params":"?message.destination-uri=${destinationUriSLHJ8}"}},{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"create"},"resource":"Bundle","description":"Create the Bundle resource in XML format on the destination server.","accept":"xml","contentType":"xml","encodeRequestUrl":true,"sourceId":"bundle-create-SLHJ"}},{"assert":{"description":"Confirm that the returned HTTP status is 201(Created).","direction":"response","responseCode":"201","warningOnly":false}}]},"test":[{"id":"01-STIN-admitted","name":"HospitalNotification-STIN","description":"GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.","action":[{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"read"},"resource":"Bundle","description":"Receive notification about admission -STIN","accept":"xml","destination":1,"encodeRequestUrl":true,"origin":1,"params":"?message.destination-uri=${destinationUri}"}},{"assert":{"description":"Confirm that the returned HTTP status is 200(OK).","direction":"response","responseCode":"200","warningOnly":false}}]},{"id":"02-STIN","name":"HospitalNotification-STIN2","description":"GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.","action":[{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"read"},"resource":"Bundle","description":"The patient does not show up after ended leave -SLHJ","accept":"xml","destination":1,"encodeRequestUrl":true,"origin":1,"params":"?message.destination-uri=${destinationUriSTIN2}"}},{"assert":{"description":"Confirm that the returned HTTP status is 200(OK).","direction":"response","responseCode":"200","warningOnly":false}}]},{"id":"04-SLHJ","name":"HospitalNotification-SLHJ","description":"GET a Hospital notification. The expected response is a 200(OK) with a payload of the Hospital notification resource in XML format.","action":[{"operation":{"type":{"system":"http://terminology.hl7.org/CodeSystem/testscript-operation-codes","code":"read"},"resource":"Bundle","description":"The patient does not show up after ended leave -SLHJ","accept":"xml","destination":1,"encodeRequestUrl":true,"origin":1,"params":"?message.destination-uri=${destinationUriSLHJ8}"}},{"assert":{"description":"Confirm that the returned HTTP status is 200(OK).","direction":"response","responseCode":"200","warningOnly":false}}]}]}